// Generated by CoffeeScript 1.3.3
(function() {

  $(document).ready(function() {
    var Post;
    Post = {
      initialize: function() {
        this.uploadStatuses(this.newPostStream());
        return this.newPostStream().onValue(function(e) {
          return console.log(e);
        });
      },
      newPostStream: function() {
        var newPostFormStream;
        newPostFormStream = $("#new-post").submitE();
        newPostFormStream.onValue(function(e) {
          return e.preventDefault();
        });
        return newPostFormStream.map(function(e) {
          return $(e.target).find("#status-input").val();
        });
      },
      uploadStatuses: function(stream) {
        var statusRequest;
        statusRequest = stream.map(function(status) {
          return {
            type: "POST",
            url: "/post/new",
            data: {
              status: status
            }
          };
        });
        return statusRequest.onValue(function(request) {
          console.log("hey");
          return $.ajax(request);
        });
      }
    };
    return Post.initialize();
  });

}).call(this);
